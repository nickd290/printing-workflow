# =============================================================================
# WEB APP ENVIRONMENT VARIABLES
# =============================================================================
# This file documents environment variables specific to the Next.js web application
# For full project configuration, see root .env.example
#
# Quick Start:
# 1. Copy this file to .env.local: cp .env.example .env.local
# 2. Fill in the required values below
# 3. Never commit .env.local to git (it's in .gitignore)
#
# =============================================================================

# =============================================================================
# REQUIRED FOR PRODUCTION DEPLOYMENT
# =============================================================================

# Database Connection
# For Railway: Auto-provided by PostgreSQL plugin
# Local dev: Use connection string from docker-compose
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/printing_workflow"

# NextAuth Configuration
# IMPORTANT: Must be set to your production web URL in Railway
# Local dev: http://localhost:5175
# Production: https://web-production-851ca.up.railway.app
NEXTAUTH_URL="http://localhost:5175"

# NextAuth Secret Key
# Generate with: openssl rand -base64 32
# IMPORTANT: Must be the SAME value in both API and web services in Railway
NEXTAUTH_SECRET="your-nextauth-secret-here-generate-with-openssl"

# API Backend URL (CRITICAL FOR PRODUCTION)
# This is the MOST IMPORTANT variable for Railway deployment
# The web app uses this to connect to the API backend
#
# Local development: http://localhost:3001
# Railway production: https://api-production-100d.up.railway.app (or your API service URL)
#
# How to find your Railway API URL:
# 1. Go to Railway Dashboard → printing-workflow project
# 2. Click on the "api" service
# 3. Go to "Settings" tab
# 4. Copy the public URL (e.g., https://api-production-xyz.up.railway.app)
# 5. Use that URL for NEXT_PUBLIC_API_URL in the WEB service variables
#
NEXT_PUBLIC_API_URL="http://localhost:3001"

# =============================================================================
# OPTIONAL (Email functionality)
# =============================================================================

# Email Configuration
# Required for sending emails (quote notifications, proof approvals, etc.)
EMAIL_FROM="noreply@yourcompany.com"
SENDGRID_API_KEY="your-sendgrid-api-key"

# =============================================================================
# RAILWAY DEPLOYMENT CHECKLIST
# =============================================================================
#
# When deploying to Railway, ensure these variables are set in the
# Railway dashboard for the "web" service:
#
# REQUIRED:
#   ✓ DATABASE_URL - Auto-provided by Railway Postgres plugin
#   ✓ NEXTAUTH_URL - Set to your web service public URL
#   ✓ NEXTAUTH_SECRET - Generate and use same value in API service
#   ✓ NEXT_PUBLIC_API_URL - Set to your API service public URL
#
# OPTIONAL:
#   ○ EMAIL_FROM - Your sender email address
#   ○ SENDGRID_API_KEY - If using SendGrid for emails
#
# Common Mistakes to Avoid:
#   ❌ Forgetting https:// in production URLs
#   ❌ Using API URL in NEXTAUTH_URL (should be web URL)
#   ❌ Different NEXTAUTH_SECRET in API vs web services
#   ❌ Not setting NEXT_PUBLIC_API_URL (causes "port 3001" error)
#
# =============================================================================

# =============================================================================
# DEVELOPMENT NOTES
# =============================================================================
#
# Local Development Setup:
# 1. Make sure Docker is running: docker ps
# 2. Start PostgreSQL: pnpm docker:up (from root)
# 3. Generate Prisma client: pnpm db:generate (from root)
# 4. Push schema to DB: pnpm db:push (from root)
# 5. Seed database: pnpm db:seed (from root)
# 6. Start web dev server: pnpm dev (from apps/web or root)
#
# Troubleshooting:
# - If API client fails, check NEXT_PUBLIC_API_URL is correct
# - If auth fails, ensure NEXTAUTH_URL and NEXTAUTH_SECRET match API
# - If DB fails, ensure DATABASE_URL points to running PostgreSQL
# - Check browser console for detailed API connection errors
#
# =============================================================================
